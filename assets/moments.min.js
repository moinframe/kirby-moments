"use strict";class MomentDate{constructor(){Object.defineProperty(this,"lang",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lang=document.documentElement.lang||"en",document.querySelectorAll(".moment-time").forEach(t=>this.init(t))}init(e){const t=e.getAttribute("datetime");if(!t)return;const i=this.formatRelativeDate(t);i&&(e.textContent=i)}formatRelativeDate(e){const t=Date.now(),i=new Date(e).getTime();if(isNaN(i))return;const o=t-i,r=Math.floor(o/864e5);if(r>=3)return;const n=new Intl.RelativeTimeFormat(this.lang,{numeric:"auto"});if(r<1){const s=Math.floor(o/36e5);if(s>=1)return n.format(-s,"hour");const l=Math.floor(o/6e4);if(l>=1)return n.format(-l,"minute");const u=Math.floor(o/1e3);return n.format(-u,"second")}return n.format(-r,"day")}}class MomentLightbox{constructor(){Object.defineProperty(this,"lightbox",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nextLink",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"prevLink",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"closeLink",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"focusableElements",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.lightbox=document.querySelector(".moment-lightbox"),this.init()}init(){var e,t,i,o,r,n;this.lightbox&&(this.lightbox.showModal(),this.nextLink=(t=(e=this.lightbox.querySelector(".moment-controls__next"))===null||e===void 0?void 0:e.getAttribute("href"))!==null&&t!==void 0?t:"",this.prevLink=(o=(i=this.lightbox.querySelector(".moment-controls__prev"))===null||i===void 0?void 0:i.getAttribute("href"))!==null&&o!==void 0?o:"",this.closeLink=(n=(r=this.lightbox.querySelector(".moment-close"))===null||r===void 0?void 0:r.getAttribute("href"))!==null&&n!==void 0?n:"",this.setupFocusTrap(),this.addEventListeners())}setupFocusTrap(){if(!this.lightbox)return;const e='a[href], button:not([disabled]), [tabindex]:not([tabindex="-1"])';this.focusableElements=Array.from(this.lightbox.querySelectorAll(e)),this.focusableElements.length>0&&this.focusableElements[0].focus()}addEventListeners(){this.lightbox&&this.lightbox.addEventListener("keydown",e=>{switch(e.code){case"ArrowLeft":this.prevLink&&this.goTo(this.prevLink);break;case"ArrowRight":this.nextLink&&this.goTo(this.nextLink);break;case"Escape":e.preventDefault(),this.closeLink&&this.goTo(this.closeLink);break;case"Tab":this.handleTabKey(e);break}})}handleTabKey(e){if(this.focusableElements.length===0)return;const t=this.focusableElements[0],i=this.focusableElements[this.focusableElements.length-1];e.shiftKey?document.activeElement===t&&(e.preventDefault(),i.focus()):document.activeElement===i&&(e.preventDefault(),t.focus())}goTo(e){window.location.href=e}}document.addEventListener("DOMContentLoaded",()=>{new MomentDate,new MomentLightbox});
